# 语法示例（MVP）

本文是一份“可直接当作测试用例来源”的语法示例集合，匹配当前约定：

- 代码块使用 `{}`；
- 语句分隔以 **换行** 为主，也允许使用 `;`；
- 关键字参考：`if/elif/else/while/def/return/break/continue/true/false/null/and/or/not`；
- 表达式支持：字面量、标识符、分组、前缀/中缀运算、调用 `()`、索引 `[]`、属性访问 `.`。

> 说明：以下示例默认支持注释（任选一种实现即可）：`# ...` 或 `// ...`。如果你暂时不做注释，忽略注释行即可。

---

## 1. 最小示例：表达式与赋值

```text
x = 1
y = 2
z = x + y * 3
```

---

## 2. 字面量

```text
a = 123
b = 3.14
c = "hello"
d = true
e = false
f = null
```

字符串（是否支持转义可后置）：

```text
s = "line1\nline2"
```

---

## 3. 分组与优先级

```text
x = 1 + 2 * 3      # 乘法优先
y = (1 + 2) * 3    # 括号改变优先级
```

逻辑运算（示例优先级：`or` < `and` < 比较 < `+` < `*` < 前缀/后缀）：

```text
ok = not a and b or c
```

---

## 4. 比较运算

```text
isSmall = x < 10
isEq = x == 10
isNe = x != 10
inRange = x >= 1 and x <= 10
```

> 建议 MVP 阶段先 **不支持** Python 的链式比较（`1 < x < 3`），用 `and` 显式连接。

---

## 5. 调用、属性、索引（后缀链）

```text
v = f(1, 2, 3)
v2 = obj.method(1).other(2)[0].name
item = arr[i + 1]
```

---

## 6. 表达式语句

```text
print("hello")
obj.reset()
```

---

## 7. `if / elif / else`

```text
if x < 0 {
  print("neg")
} elif x == 0 {
  print("zero")
} else {
  print("pos")
}
```

只用 `if/else`：

```text
if ok {
  print("OK")
} else {
  print("NO")
}
```

---

## 8. `while` 循环 + `break/continue`

```text
i = 0
sum = 0
while i < 10 {
  i = i + 1
  if i == 5 {
    continue
  }
  sum = sum + i
  if sum > 30 {
    break
  }
}
print(sum)
```

---

## 9. 函数 `def` 与 `return`

```text
def add(a, b) {
  return a + b
}

x = add(1, 2)
print(x)
```

无返回值（可理解为返回 `null`，具体语义由运行时决定）：

```text
def greet(name) {
  print("hello")
  print(name)
  return
}
```

---

## 10. 块与空行（语句分隔）

块内允许空行；连续空行应被解析器当作分隔符忽略：

```text
def demo() {

  x = 1

  y = 2
  return x + y
}
```

---

## 11. 可选的分号 `;`（一行多语句）

如果你选择支持 `;` 作为可选分隔符：

```text
x = 1; y = 2; print(x + y)
```

---

## 12. 典型错误示例（用于诊断/恢复测试）

缺少右括号：

```text
x = add(1, 2
y = 3
```

缺少右花括号（解析器应尽量继续读后续顶层语句）：

```text
def f(a) {
  return a + 1

print("still parse me")
```

不期望的 token：

```text
if {  # if 后面期望 expr
  print("bad")
}
```

---

## 13. 一个稍完整的小程序（综合）

```text
def fib(n) {
  if n <= 1 {
    return n
  }
  return fib(n - 1) + fib(n - 2)
}

i = 0
while i < 10 {
  print(fib(i))
  i = i + 1
}
```

